// Aspirational Test 02: Functions and Structs
// This file tests function definitions, calls, and struct types

import io

// Simple function with no return value
void greet(string name)
  io.println "Hello, {}!", name

// Function with return value
int add(int a, int b)
  return a + b

// Function with multiple return values
(int, int) swap(int a, int b)
  return b, a

// Function with default parameter (future feature)
void say(string message, int times = 1)
  for i := 0; i < times; i = i + 1
    io.println message

// Recursive function
int factorial(int n)
  if n <= 1
    return 1
  return n * factorial(n - 1)

// Struct definition
struct Point {
  int x, y
}

// Struct with methods
struct Rectangle {
  int width, height
  
  int area()
    return width * height
  
  int perimeter()
    return 2 * (width + height)
}

// Struct with string field
struct Person {
  string name
  int age
  
  void introduce()
    io.println "I'm {} and I'm {} years old", name, age
}

// Main execution
greet("World")
greet("Satori")

let result := add(10, 20)
io.println "10 + 20 = {}", result

let x := 5
let y := 3
let (new_x, new_y) := swap(x, y)
io.println "After swap: x={}, y={}", new_x, new_y

say("Testing", 3)

let fact5 := factorial(5)
io.println "5! = {}", fact5

// Create struct instances
let p := Point { x: 10, y: 20 }
io.println "Point: ({}, {})", p.x, p.y

let rect := Rectangle { width: 5, height: 3 }
io.println "Rectangle area: {}", rect.area()
io.println "Rectangle perimeter: {}", rect.perimeter()

let person := Person { name: "Alice", age: 30 }
person.introduce()

// Modify struct fields
p.x = 100
p.y = 200
io.println "Modified point: ({}, {})", p.x, p.y

// Nested structs
struct Circle {
  Point center
  int radius
}

let circle := Circle {
  center: Point { x: 0, y: 0 },
  radius: 10
}

io.println "Circle at ({}, {}) with radius {}", 
  circle.center.x, circle.center.y, circle.radius
